/* eslint-disable */
//@ts-nocheck
/*! For license information please see boardsPicker.1.0.js.LICENSE.txt */
(()=>{"use strict";var e,o,n=function(e,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])},n(e,o)};function t(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}Object.create,Object.create,function(e){e.READY="ready",e.PICK="pick",e.NOAUTH="noauth",e.ERROR="error",e.NEED_TOKEN="token",e.OPEN_URL="open-url",e.REQUEST_TO_WORKSPACE_LOGIN="request-to-workspace-login"}(e||(e={})),function(e){e.INIT="init",e.NEED_TO_AUTHENTICATE="authenticate",e.NEED_TO_RELOAD="reload",e.TOKEN="token",e.SHOW_ERROR="error",e.SWITCH_TO_WORKSPACE_LOGIN="switch-to-workspace-login"}(o||(o={}));var r,a,i,c,s,E,_,T,O,A,d=function(e,o){void 0===o&&(o=void 0),this.guid=e,this.payload=o,this.guid=e,this.payload=o},l=function(e){function n(n){var t=e.call(this,n)||this;return t.type=o.INIT,t}return t(n,e),n}(d),p=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=o.NEED_TO_AUTHENTICATE,n}return t(n,e),n}(d),I=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=o.SWITCH_TO_WORKSPACE_LOGIN,n}return t(n,e),n}(d),u=function(e){function n(n){var t=e.call(this,n)||this;return t.type=o.NEED_TO_RELOAD,t}return t(n,e),n}(d),R=function(e){function n(n,t){var r=e.call(this,n,t)||this;return r.type=o.TOKEN,r}return t(n,e),n}(d),N=function(e){function n(n,t){var r=e.call(this,n,t)||this;return r.type=o.SHOW_ERROR,r}return t(n,e),n}(d);function S(e){for(var o=e.toString(16);o.length<2;)o="0"+o;return o}!function(e){e.IGNORE_UPDATE_CONFIG="ignoreUpdateConfig",e.FAKE_SERVER_UNAVAILABLE="fake_server_unavailable",e.DISABLE_LOCAL_STORAGE="disableLocalStorage",e.ACH_DEBUG="achdebug",e.DEBUG="debug",e.DEBUG_FONT_STYLE="debugFontStyle",e.SHOW_WOOTRIC="showWootric",e.TUTORIAL="tutorial",e.CIRCLE_ONBOARDING="circleOnboarding",e.DISABLE_WHATS_NEW="disableWhatsNew",e.FORCE_WHATS_NEW="forceWhatsNew",e.NO_NEED_TO_HACK_POST_MESSAGE="noNeedToHackPostMessage",e.USE_API_FOR_AUTH="use_api_for_auth",e.FAKE_APP_START_FAILURE="fake_app_start_failure",e.AB_TESTS="ab_tests",e.PRELOAD_MODULES="preload-modules",e.LOAD_BOARD_UI="load-board-ui",e.BOARD_INFO_TIMEOUT="board-info-timeout",e.BOARD_UI_TIMEOUT="board-ui-timeout",e.BOARD_CONNECTION_TIMEOUT="board-con-timeout",e.ROAD_TO_JSON="roadToJson",e.USE_POST_AUTH="usePostAuth",e.WELCOME="welcome",e.ROBO_COLLABORATION="forceStartRoboCollaboration",e.SHOW_GIF_PLAYER_WITH_GIF="showGifPlayerWithGif"}(r||(r={})),function(e){e.LOG_TIME="logTime",e.PLOG="plog",e.LOG_SDK_COMMANDS="logSdkCommands"}(a||(a={})),function(e){e.MOBILE="mobile"}(i||(i={})),function(e){e.PREVIEW_TYPE="previewType",e.WIDGET_ID="widgetId",e.MIN_LEFT="minLeft",e.MIN_TOP="minTop",e.MAX_RIGHT="maxRight",e.MAX_BOTTOM="maxBottom",e.VIEWPORT_WIDTH="viewportWidth",e.VIEWPORT_HEIGHT="viewportHeight",e.SCREEN_WIDTH="screenWidth",e.SCREEN_HEIGHT="screenHeight",e.EXPORT_FORMAT="exportFormat",e.FRAME_ID="frameId",e.PRESENTATION_MODE="pres"}(c||(c={})),function(e){e.ACCESS_TOKEN="accessToken",e.BOARD_ACCESS_TOKEN="boardAccessToken",e.POST_MESSAGE_URL_OPENER="postMessageUrlOpener",e.PARENT_DOMAIN="parentDomain",e.EMBED_AUTO_PLAY="embedAutoplay",e.EXTERNAL_AUTH_FLOW="externalAuthFlow"}(s||(s={})),function(e){e.EMBED_ID="embedId",e.AUTO_PLAY="autoplay"}(E||(E={})),function(e){e.OPEN_WIREFRAMES="openWireframes",e.OPEN_SHAPE_LIBRARY="openShapeLibrary",e.OPEN_DIAGRAMMING_IMPORT="openDiagrammingImport",e.CREATE_BUSINESS_PLAN="createBusinessPlan",e.CREATE_CONSULTANT_PLAN="createConsultantPlan",e.CREATE_TEAM_PLAN="createTeamPlan",e.MOBILE_AUTO_TEST="mobileAutotest",e.INVITE="invite"}(_||(_={})),function(e){e.NO_LIMITS="noLimits",e.CREATE_DEV_TEAM="createDevTeam",e.CREATE_FREE_TEAM2018="createFreeTeam2018",e.NAVIGATION_SESSION_ID="navigationSessionId",e.MID="mid",e.PROJECT_ID="projectId",e.SPACE_ID="spaceId",e.UTM_CONTENT="utm_content",e.MESSENGER="messenger",e.UTM_MEDIUM="utm_medium",e.FSDURATION="fsduration",e.CONTENTFUL_ENVIRONMENT="contentfulEnvironment",e.FROM_EMBED="fromEmbed",e.INSPIRATION_CENTER_VERSION="inspirationCenter.version",e.INSPIRATION_CENTER_VISIBLE="inspirationCenter.visible",e.AUTOTEST="autotest",e.USE_TEMPLATE="useTemplate",e.AUTH_FAIL_REDIRECT="authFailRedirect",e.BILLING_PAGE="billingPage",e.APPLICATION_ID="applicationId",e.TEAM_PRIVACY_SECTION_SCROLL_TO="team_privacy",e.EXTENDED_CONTENT_ADMIN_PERMISSIONS_SECTION_SCROLL_TO="extended-cap-permissions",e.DOMAIN_CONTROL_SCROLL_TO="domain_control",e.BLOCK_DEACTIVATED_USERS_SCROLL_TO="block-deactivated-users",e.INVITATION_LINK_SCROLL_TO="invitation_link",e.CONFIRMATION_CODE="saml-confirmation-code",e.CONFIRMATION_DOMAIN="saml-confirmation-domain",e.IN_APP_PRICING_VISIBLE="inAppPricing.visible",e.SWITCH_TO_YEARLY="switchToYearly",e.INVITE_MODAL_VISIBLE="inviteModal.visible",e.CREATE_PROJECT_MODAL_VISIBLE="createProjectModal.visible",e.LOAD_SDK="loadSdk",e.STATS="stats",e.CREATE_SCALE_MODE="scs",e.FIRST_LOGIN="firstLogin",e.EXTERNAL_APP_URL="externalAppUrl",e.EXTERNAL_APP_NAME="externalAppName",e.SHOW_UPGRADE="showUpgrade",e.FEATURES="features",e.FEATURES_ON="featuresOn",e.FEATURES_OFF="featuresOff",e.CANVAS_OBJECT_TYPE="cot",e.MOVE_TO_OBJECT="moveToWidget",e.NOTES_SCROLL_TO="notesScrollTo",e.OPEN_NOTE_COMMENT="openNoteComment",e.OPEN_NOTE_MENTION="openNoteMention",e.OPEN_NOTES="openNotes",e.SHARE_BOARD="shareBoard",e.OPEN_CHAT="openChat",e.OPEN_COMMENT="openComment",e.OPEN_COMMENTS="openComments",e.OPEN_ACTIVITY="openActivity",e.OPEN_FRAMES="openFrames",e.OPEN_VOTING="openVoting",e.SCREEN_READER_MODE="screenReaderMode",e.COPY_BOARD_ID="copyBoardId",e.COPY_BOARD_TITLE="copyBoardTitle",e.COPY_BOARD_ACCOUNT_ID="copyBoardAccountId",e.COPY_TEMPLATE_BOARD_META_ID="copyTemplateMetaId",e.CREATE_NEW_BOARD="createNewBoard",e.MIRO_NEW_BOARD="miroNewBoard",e.MIRO_NEW_BOARD_ACCOUNT_ID="miroNewBoardAccountId",e.MIRO_NEW_WORKSHOP="miroNewWorkshop",e.CREATE_BOARD_FROM_GOOGLE_DRIVE="createBoardFromGoogleDrive",e.TEMPLATES_PICKER_PRESELECTED_CATEGORY="templatesPickerPreselectedCategory",e.TEMPLATES_PICKER_PRESELECTED_TEMPLATE="tpTemplate",e.TEMPLATES_PICKER_IS_CUSTOM_TEMPLATE="isCustom",e.FOLDER_ID="folderId",e.REINSTALL_SLACK_APP="reinstallSlackApp",e.CHANNEL="channel",e.MOVE_TO_VIEWPORT="moveToViewport",e.PRESENTATION_FRAME="presentationFrame",e.RUN_PRESENTATION="runPresentation",e.ACTIVATE_STARTUP="activateStartup",e.ENABLE_CURSORS="enableCursors",e.FPS_OUTPUT="fps_output",e.HAS_DEVTOOLS="hasDevTools",e.INSERT_TEMPLATE="insertTemplate",e.CODE="code",e.REASON="reason",e.MESSAGE="message",e.MIRO_PRO_NETWORK="mpn",e.IS_MIRO_LITE_SHARED_LINK="isMiroLiteSharedLink",e.GOOGLE_AUTH_URL="googleAuthUrl",e.WORKSPACE="workspace",e.IS_MIRO_LITE_STANDALONE="isMiroLiteStandalone",e.DOMAIN_MODE="domainMode",e.APP_SUBMISSION_DIALOG_REFERRER="asd-referrer",e.BOARD_ACCESS_TOKEN="boardAccessToken",e.CANCEL_AT_PERIOD_END="cancelAtPeriodEnd"}(T||(T={})),function(e){e.EMAIL="email",e.USER_EMAIL="userEmail",e.MAIL_USER_EMAIL="mailUserEmail",e.ID="id",e.SELECTED_LICENSE="selectedLicense",e.INVITES="invites",e.CHANGE_TO_FULL="changeToFull",e.SORT_BY_ADDING_DATE_DESC="sortByAddingDateDesc",e.ADD_GUESTS_AS_MEMBERS_REQUEST_ID="addGuestsAsMembersRequestId"}(O||(O={})),function(e){e.SELECT="select",e.ACCESS_LINK="access-link",e.GET_ACCESS_LINK="get-access-link"}(A||(A={}));const L=A;var m="/app/boards-picker/",P=document.currentScript&&document.currentScript.getAttribute("data-debug-origin")||"https://miro.com",C=new URL("".concat(P).concat(m));C.searchParams.append("parentOrigin",location.origin);function f(e,o){var n=new URL(e.origin),t=e.searchParams;n.pathname=o?"/app/auth/workspace":"/app",n.searchParams.append(T.EXTERNAL_APP_NAME,"Board Picker"),n.searchParams.append(T.CHANNEL,"boards_picker");var r="".concat(m,"?").concat(t,"&authSuccess=true");n.searchParams.append(T.EXTERNAL_APP_URL,r.toString());var a=M();return window.open(n.toString(),"_blank","width=".concat(450,",height=").concat(650,",left=").concat(a.left,",top=").concat(a.top,",menubar=0,toolbar=0"))}function M(e,o){void 0===e&&(e=450),void 0===o&&(o=650);var n=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY;return{left:n+window.outerWidth/2-e/2,top:t+window.outerHeight/2-o/2}}var D=window;D.miroBoardsPicker=D.rtbBoardsPicker={open:function(o){var n,t;!function(e){var o,n;if(!e.action)throw new Error("'action' option is required");if("select"!==e.action&&"access-link"!==e.action&&"get-access-link"!==e.action)throw new Error("Wrong 'action' option is ".concat(e.action,". Available values are 'select' or 'access-link'"));if("get-access-link"===e.action){if("string"!=typeof(null===(o=e.accessLinkOptions)||void 0===o?void 0:o.boardId))throw new Error("'accessLinkOptions.boardId' option is required");if("string"!=typeof(null===(n=e.accessLinkOptions)||void 0===n?void 0:n.policy))throw new Error("'accessLinkOptions.policy' option is required. Available values: PRIVATE | VIEW | COMMENT")}if(!e.clientId)throw new Error("'clientId' option is required");if(!e.success)throw new Error("'success' option is required");if(e.allowCreateAnonymousBoards&&!e.getAnonymousUserToken){if(!e.getToken)throw new Error("'getAnonymousUserToken' option is required");console.warn("Miro boardsPicker: 'getToken' parameter will be deprecated and being replaced with 'getAnonymousUserToken'"),e.getAnonymousUserToken=e.getToken}}(o);var r=function(){},a=function(){n().close()},i=function(){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues){var o=new Uint8Array(16);return e.getRandomValues(o),o[6]|=64,o[6]&=79,o[8]|=128,o[8]&=191,S(o[0])+S(o[1])+S(o[2])+S(o[3])+"-"+S(o[4])+S(o[5])+"-"+S(o[6])+S(o[7])+"-"+S(o[8])+S(o[9])+"-"+S(o[10])+S(o[11])+S(o[12])+S(o[13])+S(o[14])+S(o[15])}return function(){for(var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",o="0123456789abcdef",n=0,t="",r=0;r<36;r++)"-"!==e[r]&&"4"!==e[r]&&(n=16*Math.random()|0),"x"===e[r]?t+=o[n]:"y"===e[r]?(n&=3,t+=o[n|=8]):t+=e[r];return t}()}(),c=new URL(C.toString());c.searchParams.append("guid",i),c.searchParams.append("action",o.action),c.searchParams.append("clientId",o.clientId),c.searchParams.append("postMessageUrlOpener",o.onOpenUrl?"true":"false"),o.accessToken&&c.searchParams.append("accessToken",o.accessToken),void 0!==o.hideLogo&&c.searchParams.append("hideLogo","".concat(o.hideLogo)),void 0!==o.legacyPicker&&c.searchParams.append("legacyPicker","".concat(o.legacyPicker));var _=o.mockExperiments;return void 0!==_&&Object.keys(_).forEach((function(e){var o=_[e];void 0!==o&&c.searchParams.append("split_exp_".concat(e),"".concat(o))})),"get-access-link"===o.action&&c.searchParams.append("accessLinkOptions",JSON.stringify(o.accessLinkOptions)),o.getBase64&&c.searchParams.append("getBase64","".concat(o.getBase64)),o.allowCreateAnonymousBoards&&c.searchParams.append("allowCreateAnonymousBoards","".concat(o.allowCreateAnonymousBoards)),n=o.iframeContainer?function(e,o){var n=o instanceof HTMLElement?o:document.getElementById(o),t=document.createElement("iframe");if(null===n)throw new Error("IFrame container element not found");return t.src=e,n.appendChild(t),function(){return t.contentWindow}}(c.toString(),o.iframeContainer):function(e,o){var n;if(o)(n=o).location.replace(e);else{var t=M();n=window.open(e,"_blank","width=".concat(450,",height=").concat(650,",left=").concat(t.left,",top=").concat(t.top,",menubar=0,toolbar=0,location=0,personalbar=0,status=0"))}return function(){return n}}(c.toString(),o.windowRef),window.addEventListener("message",(function(_){if((_.source===n()||_.source===t)&&_.data.guid===i)switch(_.data.type){case e.NOAUTH:r(),o.notAuthorized?o.notAuthorized():o.iframeContainer?t=f(c,!1):n().postMessage(new p(i),_.origin);break;case e.REQUEST_TO_WORKSPACE_LOGIN:r(),o.iframeContainer?t=f(c,!0):n().postMessage(new I(i),_.origin);break;case e.READY:if(S=n(),m=o.cancel,C=-1,M=function(){clearInterval(C)},m&&(S?C=setInterval((function(){S.closed&&(M(),m())}),100):m()),r=M,t&&(t.close(),t=void 0,o.iframeContainer)){n().postMessage(new u(i),_.origin);break}n().postMessage(new l(i),_.origin),o.ready&&o.ready();break;case e.PICK:if(r(),o.success){var T=_.data.payload,O=T.workspacePrefix||P,A={id:T.id,name:T.title,viewLink:"".concat(O,"/app/board/").concat(T.id)};if(o.action===L.ACCESS_LINK||o.action===L.GET_ACCESS_LINK){var d="".concat(O,"/app/live-embed/").concat(T.id);A.accessLink="".concat(d,"?").concat(s.BOARD_ACCESS_TOKEN,"=").concat(T.accessLink.token,"&").concat(E.AUTO_PLAY,"=true"),A.accessLinkPolicy=T.accessLink.sharingPolicy,A.embedHtml='<iframe class="miro-embedded-board" src="'.concat(A.accessLink,'" referrerpolicy="no-referrer-when-downgrade" frameborder="0" style="background: transparent; border: 1px solid #ccc;"></iframe>')}T.boardImgBase64&&(A.boardImgBase64=T.boardImgBase64),o.success(A)}a();break;case e.NEED_TOKEN:(function(e){return e.getAnonymousUserToken?e.getAnonymousUserToken():Promise.resolve("undefined")})(o).then((function(e){n().postMessage(new R(i,e),_.origin)})).catch((function(e){console.error("Failed to get Miro anonnymous user access token in getAnonymousUserToken(), error:",e),n().postMessage(new N(i,e),_.origin)}));break;case e.ERROR:r(),o.error&&o.error(_.data.payload);break;case e.OPEN_URL:o.onOpenUrl&&o.onOpenUrl(_.data.payload.url)}var S,m,C,M})),{close:a}}}})();